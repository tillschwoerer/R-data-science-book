<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Character data: stringr | R Data Science Book</title>
  <meta name="description" content="7 Character data: stringr | R Data Science Book" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Character data: stringr | R Data Science Book" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="tillschwoerer/R-data-science-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Character data: stringr | R Data Science Book" />
  
  
  

<meta name="author" content="Tools and Programming Languages for Data Scientists, FH Kiel, Summer Term 2020" />


<meta name="date" content="2020-05-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="forcats.html"/>
<link rel="next" href="data-table.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#goals"><i class="fa fa-check"></i><b>1.1</b> Goals</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.2</b> Data</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#git-and-github"><i class="fa fa-check"></i><b>1.3</b> Git and GitHub</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="readr.html"><a href="readr.html"><i class="fa fa-check"></i><b>2</b> Reading data: readr</a></li>
<li class="chapter" data-level="3" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>3</b> Tidying data: tidyr</a></li>
<li class="chapter" data-level="4" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>4</b> Wrangling data: dplyr</a><ul>
<li class="chapter" data-level="4.1" data-path="dplyr.html"><a href="dplyr.html#typical-workflows"><i class="fa fa-check"></i><b>4.1</b> Two typial workflows</a></li>
<li class="chapter" data-level="4.2" data-path="dplyr.html"><a href="dplyr.html#manipulating-rows"><i class="fa fa-check"></i><b>4.2</b> Manipulating rows</a><ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr.html"><a href="dplyr.html#extract-rows"><i class="fa fa-check"></i><b>4.2.1</b> Extract rows</a></li>
<li class="chapter" data-level="4.2.2" data-path="dplyr.html"><a href="dplyr.html#arranging-rows"><i class="fa fa-check"></i><b>4.2.2</b> Arranging rows</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dplyr.html"><a href="dplyr.html#manipulating-columns"><i class="fa fa-check"></i><b>4.3</b> Manipulating columns</a><ul>
<li class="chapter" data-level="4.3.1" data-path="dplyr.html"><a href="dplyr.html#extract-and-rename-columns"><i class="fa fa-check"></i><b>4.3.1</b> Extract and rename columns</a></li>
<li class="chapter" data-level="4.3.2" data-path="dplyr.html"><a href="dplyr.html#create-new-columns"><i class="fa fa-check"></i><b>4.3.2</b> Create new columns</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dplyr.html"><a href="dplyr.html#scoped-functions"><i class="fa fa-check"></i><b>4.4</b> Scoped functions</a></li>
<li class="chapter" data-level="4.5" data-path="dplyr.html"><a href="dplyr.html#aggregate"><i class="fa fa-check"></i><b>4.5</b> Aggregate</a></li>
<li class="chapter" data-level="4.6" data-path="dplyr.html"><a href="dplyr.html#window-functions"><i class="fa fa-check"></i><b>4.6</b> Window functions</a></li>
<li class="chapter" data-level="4.7" data-path="dplyr.html"><a href="dplyr.html#combining-tables"><i class="fa fa-check"></i><b>4.7</b> Combining tables</a></li>
<li class="chapter" data-level="4.8" data-path="dplyr.html"><a href="dplyr.html#database-backend"><i class="fa fa-check"></i><b>4.8</b> Database backend</a><ul>
<li class="chapter" data-level="4.8.1" data-path="dplyr.html"><a href="dplyr.html#motivation"><i class="fa fa-check"></i><b>4.8.1</b> Motivation</a></li>
<li class="chapter" data-level="4.8.2" data-path="dplyr.html"><a href="dplyr.html#set-up"><i class="fa fa-check"></i><b>4.8.2</b> Set up</a></li>
<li class="chapter" data-level="4.8.3" data-path="dplyr.html"><a href="dplyr.html#querying-the-database"><i class="fa fa-check"></i><b>4.8.3</b> Querying the database</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lubridate.html"><a href="lubridate.html"><i class="fa fa-check"></i><b>5</b> Dates and times: lubridate</a><ul>
<li class="chapter" data-level="5.1" data-path="lubridate.html"><a href="lubridate.html#what-is-lubridate"><i class="fa fa-check"></i><b>5.1</b> What is Lubridate?</a></li>
<li class="chapter" data-level="5.2" data-path="lubridate.html"><a href="lubridate.html#basics"><i class="fa fa-check"></i><b>5.2</b> Basics</a></li>
<li class="chapter" data-level="5.3" data-path="lubridate.html"><a href="lubridate.html#import-data-clean-date-time"><i class="fa fa-check"></i><b>5.3</b> Import data, clean date-time</a></li>
<li class="chapter" data-level="5.4" data-path="lubridate.html"><a href="lubridate.html#check-and-modify-data"><i class="fa fa-check"></i><b>5.4</b> Check and modify data</a></li>
<li class="chapter" data-level="5.5" data-path="lubridate.html"><a href="lubridate.html#before-exploration"><i class="fa fa-check"></i><b>5.5</b> Before exploration</a><ul>
<li class="chapter" data-level="5.5.1" data-path="lubridate.html"><a href="lubridate.html#intervals"><i class="fa fa-check"></i><b>5.5.1</b> Intervals</a></li>
<li class="chapter" data-level="5.5.2" data-path="lubridate.html"><a href="lubridate.html#groupings"><i class="fa fa-check"></i><b>5.5.2</b> Groupings</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="lubridate.html"><a href="lubridate.html#exploration---analysis"><i class="fa fa-check"></i><b>5.6</b> Exploration - Analysis</a><ul>
<li class="chapter" data-level="5.6.1" data-path="lubridate.html"><a href="lubridate.html#temperatur"><i class="fa fa-check"></i><b>5.6.1</b> Temperatur</a></li>
<li class="chapter" data-level="5.6.2" data-path="lubridate.html"><a href="lubridate.html#rainfall"><i class="fa fa-check"></i><b>5.6.2</b> Rainfall</a></li>
<li class="chapter" data-level="5.6.3" data-path="lubridate.html"><a href="lubridate.html#humidity"><i class="fa fa-check"></i><b>5.6.3</b> Humidity</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="lubridate.html"><a href="lubridate.html#wrap-up"><i class="fa fa-check"></i><b>5.7</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="forcats.html"><a href="forcats.html"><i class="fa fa-check"></i><b>6</b> Categorical data: forcats</a><ul>
<li class="chapter" data-level="6.1" data-path="forcats.html"><a href="forcats.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="forcats.html"><a href="forcats.html#general-functions"><i class="fa fa-check"></i><b>6.2</b> General functions</a><ul>
<li class="chapter" data-level="6.2.1" data-path="forcats.html"><a href="forcats.html#create"><i class="fa fa-check"></i><b>6.2.1</b> Create</a></li>
<li class="chapter" data-level="6.2.2" data-path="forcats.html"><a href="forcats.html#count-values-per-level"><i class="fa fa-check"></i><b>6.2.2</b> Count values per level</a></li>
<li class="chapter" data-level="6.2.3" data-path="forcats.html"><a href="forcats.html#Inspect-and-set-levels"><i class="fa fa-check"></i><b>6.2.3</b> Inspect and set levels</a></li>
<li class="chapter" data-level="6.2.4" data-path="forcats.html"><a href="forcats.html#inspect-unique-values"><i class="fa fa-check"></i><b>6.2.4</b> Inspect unique values</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="forcats.html"><a href="forcats.html#combine-factors"><i class="fa fa-check"></i><b>6.3</b> Combine factors</a><ul>
<li class="chapter" data-level="6.3.1" data-path="forcats.html"><a href="forcats.html#combine-factors-with-different-levels"><i class="fa fa-check"></i><b>6.3.1</b> Combine factors with different levels</a></li>
<li class="chapter" data-level="6.3.2" data-path="forcats.html"><a href="forcats.html#standardise-levels-of-various-factors"><i class="fa fa-check"></i><b>6.3.2</b> Standardise levels of various factors</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="forcats.html"><a href="forcats.html#order-of-levels"><i class="fa fa-check"></i><b>6.4</b> Order of levels</a><ul>
<li class="chapter" data-level="6.4.1" data-path="forcats.html"><a href="forcats.html#manual-reordering"><i class="fa fa-check"></i><b>6.4.1</b> Manual reordering of levels</a></li>
<li class="chapter" data-level="6.4.2" data-path="forcats.html"><a href="forcats.html#reordering-by-frequency"><i class="fa fa-check"></i><b>6.4.2</b> Reordering by frequency</a></li>
<li class="chapter" data-level="6.4.3" data-path="forcats.html"><a href="forcats.html#reordering-by-appearance"><i class="fa fa-check"></i><b>6.4.3</b> Reordering by appearance</a></li>
<li class="chapter" data-level="6.4.4" data-path="forcats.html"><a href="forcats.html#reverse-level-order"><i class="fa fa-check"></i><b>6.4.4</b> Reverse level order</a></li>
<li class="chapter" data-level="6.4.5" data-path="forcats.html"><a href="forcats.html#shift-levels"><i class="fa fa-check"></i><b>6.4.5</b> Shift levels</a></li>
<li class="chapter" data-level="6.4.6" data-path="forcats.html"><a href="forcats.html#randomly-shuffle-levels"><i class="fa fa-check"></i><b>6.4.6</b> Randomly shuffle levels</a></li>
<li class="chapter" data-level="6.4.7" data-path="forcats.html"><a href="forcats.html#reordering-levels-by-other-variables"><i class="fa fa-check"></i><b>6.4.7</b> Reordering levels by other variables</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="forcats.html"><a href="forcats.html#change-the-value-of-levels"><i class="fa fa-check"></i><b>6.5</b> Change the value of levels</a><ul>
<li class="chapter" data-level="6.5.1" data-path="forcats.html"><a href="forcats.html#renaming-the-levels"><i class="fa fa-check"></i><b>6.5.1</b> Renaming the levels</a></li>
<li class="chapter" data-level="6.5.2" data-path="forcats.html"><a href="forcats.html#anonymize-levels"><i class="fa fa-check"></i><b>6.5.2</b> Anonymize levels</a></li>
<li class="chapter" data-level="6.5.3" data-path="forcats.html"><a href="forcats.html#collapse-multiple-levels-into-one"><i class="fa fa-check"></i><b>6.5.3</b> Collapse multiple levels into one</a></li>
<li class="chapter" data-level="6.5.4" data-path="forcats.html"><a href="forcats.html#aggregate-levels-into-a-lump"><i class="fa fa-check"></i><b>6.5.4</b> Aggregate levels into a lump</a></li>
<li class="chapter" data-level="6.5.5" data-path="forcats.html"><a href="forcats.html#manually-lump-levels"><i class="fa fa-check"></i><b>6.5.5</b> Manually lump levels</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="forcats.html"><a href="forcats.html#add-or-drop-levels"><i class="fa fa-check"></i><b>6.6</b> Add or drop levels</a><ul>
<li class="chapter" data-level="6.6.1" data-path="forcats.html"><a href="forcats.html#add-levels"><i class="fa fa-check"></i><b>6.6.1</b> Add levels</a></li>
<li class="chapter" data-level="6.6.2" data-path="forcats.html"><a href="forcats.html#drop-levels"><i class="fa fa-check"></i><b>6.6.2</b> Drop levels</a></li>
<li class="chapter" data-level="6.6.3" data-path="forcats.html"><a href="forcats.html#assign-a-level-to-nas"><i class="fa fa-check"></i><b>6.6.3</b> Assign a level to <code>NAs</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="stringr.html"><a href="stringr.html"><i class="fa fa-check"></i><b>7</b> Character data: stringr</a><ul>
<li class="chapter" data-level="7.1" data-path="stringr.html"><a href="stringr.html#introduction-1"><i class="fa fa-check"></i><b>7.1</b> Introduction</a><ul>
<li class="chapter" data-level="7.1.1" data-path="stringr.html"><a href="stringr.html#use-of-stringr-in-the-r-environment"><i class="fa fa-check"></i><b>7.1.1</b> Use of stringR in the R environment</a></li>
<li class="chapter" data-level="7.1.2" data-path="stringr.html"><a href="stringr.html#types-of-data-which-could-be-used-with-stringr"><i class="fa fa-check"></i><b>7.1.2</b> Types of data, which could be used with stringR</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="stringr.html"><a href="stringr.html#data-set-for-examples"><i class="fa fa-check"></i><b>7.2</b> Data Set for examples</a></li>
<li class="chapter" data-level="7.3" data-path="stringr.html"><a href="stringr.html#regular-expressions"><i class="fa fa-check"></i><b>7.3</b> Regular Expressions</a></li>
<li class="chapter" data-level="7.4" data-path="stringr.html"><a href="stringr.html#functions-of-stringr-explained"><i class="fa fa-check"></i><b>7.4</b> Functions of stringR explained</a><ul>
<li class="chapter" data-level="7.4.1" data-path="stringr.html"><a href="stringr.html#manage-lengths"><i class="fa fa-check"></i><b>7.4.1</b> Manage lengths</a></li>
<li class="chapter" data-level="7.4.2" data-path="stringr.html"><a href="stringr.html#subset-strings"><i class="fa fa-check"></i><b>7.4.2</b> Subset Strings</a></li>
<li class="chapter" data-level="7.4.3" data-path="stringr.html"><a href="stringr.html#detect-matches"><i class="fa fa-check"></i><b>7.4.3</b> Detect matches</a></li>
<li class="chapter" data-level="7.4.4" data-path="stringr.html"><a href="stringr.html#mutate-strings"><i class="fa fa-check"></i><b>7.4.4</b> Mutate Strings</a></li>
<li class="chapter" data-level="7.4.5" data-path="stringr.html"><a href="stringr.html#join-and-split"><i class="fa fa-check"></i><b>7.4.5</b> Join and Split</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="stringr.html"><a href="stringr.html#literature"><i class="fa fa-check"></i><b>7.5</b> Literature</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-table.html"><a href="data-table.html"><i class="fa fa-check"></i><b>8</b> High performance computing: data.table</a><ul>
<li class="chapter" data-level="8.1" data-path="data-table.html"><a href="data-table.html#motivation-1"><i class="fa fa-check"></i><b>8.1</b> Motivation</a></li>
<li class="chapter" data-level="8.2" data-path="data-table.html"><a href="data-table.html#data-exploration"><i class="fa fa-check"></i><b>8.2</b> Data exploration</a><ul>
<li class="chapter" data-level="8.2.1" data-path="data-table.html"><a href="data-table.html#subsetting-rows"><i class="fa fa-check"></i><b>8.2.1</b> Subsetting rows</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-table.html"><a href="data-table.html#selecting-columns"><i class="fa fa-check"></i><b>8.2.2</b> Selecting Columns</a></li>
<li class="chapter" data-level="8.2.3" data-path="data-table.html"><a href="data-table.html#grouping-results"><i class="fa fa-check"></i><b>8.2.3</b> Grouping results</a></li>
<li class="chapter" data-level="8.2.4" data-path="data-table.html"><a href="data-table.html#editing-data"><i class="fa fa-check"></i><b>8.2.4</b> Editing Data</a></li>
<li class="chapter" data-level="8.2.5" data-path="data-table.html"><a href="data-table.html#side-effects"><i class="fa fa-check"></i><b>8.2.5</b> Side effects</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-table.html"><a href="data-table.html#runtime-comparision"><i class="fa fa-check"></i><b>8.3</b> Runtime comparision</a></li>
<li class="chapter" data-level="8.4" data-path="data-table.html"><a href="data-table.html#further-resources"><i class="fa fa-check"></i><b>8.4</b> Further resources</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Data Science Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stringr" class="section level1">
<h1><span class="header-section-number">7</span> Character data: stringr</h1>
<p>Resources:</p>
<ul>
<li><a href="https://stringr.tidyverse.org/">Homepage</a></li>
<li><a href="https://r4ds.had.co.nz/strings.html">Book Chapter in R4DS</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/strings.pdf">Cheatsheet</a></li>
<li><a href="https://cran.r-project.org/web/packages/stringr/vignettes/stringr.html">Vignette Into</a></li>
<li><a href="https://cran.r-project.org/web/packages/stringr/vignettes/regular-expressions.html">Vignette Regular Expressions</a></li>
</ul>
<p>Suggested data: recipes</p>
<p>Advice: Many of the examples in the Vignettes just refer to vectors. How can we use stringr to create/modify character columns of a data frame?</p>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">7.1</span> Introduction</h2>
<div id="use-of-stringr-in-the-r-environment" class="section level3">
<h3><span class="header-section-number">7.1.1</span> Use of stringR in the R environment</h3>
<p>StringR is a package that deals with measuring strings, search in strings and altering strings. StringR is thus mostly involved with data preprocessing, but it can also be used for text analysis (e.g. in text mining for determining the frequency of words). In the following, we will list most of the functions available in an encyclopedic style and describe their usage mostly within a single database, based on cooking recipes.</p>
<p>To give an overall orientation of the functions, we want to present a short overview over some of the most commonly used functions.</p>
<p>If you’re interested in counting the words within a text, go to detect matches and especially str_detect. str_subset could be interesting, if you have a collection of documents and you want to have a subset of these documents dealing with a certain topic. You can therefore choose a list of words related to the topic. Keep in mind that topic modelling might be better. The mutate-functions str_sub or str_replace can replace substrings or patterns in a text. This might be useful, if a word or expression is repeatedly used wrong and needs to be changed. Join several strings in order to create a long text can be done using str_c whereas the opposite, the splitting of string can be performed with the str_split function. Another useful tool in stringr are the str_sort and str_order functions. As their name indicates, they sort or order strings according to your conditions.</p>
<p>Probably the use cases in real-life are rather technical, but hopefully the uses cases above provide some clarity of why stringR might be useful.</p>
</div>
<div id="types-of-data-which-could-be-used-with-stringr" class="section level3">
<h3><span class="header-section-number">7.1.2</span> Types of data, which could be used with stringR</h3>
<p>The way you use the functions of stringR is dependent on which kind of data you want to analyze.</p>
<p>The simplest example is having one word as an entry in every box, e.g. the in the column “job”, there might be an entry “cook”. Here stringR is best for formatting the words. StringR can be used on number entries as well.</p>
<p>Regarding our example, there could also be more than one word per box, e.g. the tags for a computer game: “singleplayer, action, medieval”. stringR can help formatting these multiple entries into a desired form.</p>
<p>Researching the package, we were under the impression that stringR is mostly designed for the purpose of managing and analyzing full texts or longer strings.</p>
<p>We want to point out that full text analysis as done in text mining, e.g. the novel The Time Machine by H.G. Wells, doesn’t operate on a long text as a whole string. Instead, it’d rather tokenize the text first (Silge Robinson 2017). As a result every word is put in another row, as you can see here:</p>
<pre><code>## # A tibble: 32,653 x 2
##    gutenberg_id word   
##           &lt;int&gt; &lt;chr&gt;  
##  1           35 the    
##  2           35 time   
##  3           35 machine
##  4           35 by     
##  5           35 h      
##  6           35 g      
##  7           35 wells  
##  8           35 1898   
##  9           35 i      
## 10           35 the    
## # ... with 32,643 more rows</code></pre>
<p>This format will set restrictions on your ability to use the stringR functions, because stringR seems to be designed to operate on full texts and not on single worded strings. However, some stringR methods like str_detect are used frequently in text mining.</p>
</div>
</div>
<div id="data-set-for-examples" class="section level2">
<h2><span class="header-section-number">7.2</span> Data Set for examples</h2>
<p>As a data set for most of our examples we use the recipes data set, which contains recipes from various recipe websites from the USA. The dataset contains the recipe name, tags (such as “vegetarian”), the estimated time to cook it, the nutrition score, the ingredients, the steps needed to cook the recipe itself and a description of the recipe from the author.</p>
</div>
<div id="regular-expressions" class="section level2">
<h2><span class="header-section-number">7.3</span> Regular Expressions</h2>
<p>Regular expressions (regex) are used in almost every programming language. They are a way to normalize the syntax of strings. More importantly, they can not only be used to express a static word, but also to generally refer to defined group of words. For example, the set of words, which end on “r” contain the words “letter”, “bear”, “beer” etc. So, regular expressions are often used to match a set of words instead of a single word.</p>
<p>For regular expressions, the following holds:</p>
<ul>
<li>For the regular expression “a”, you use the character “a”</li>
<li>For all punctuation marks a backslash is put in front. E.g. “\?” is the regular expression for the question mark: “?”. But to write “?” in R, you must use two backslashes: “\\?”</li>
<li>For any digit, you can use the regular expression “ or also”[:digit:]“. For word characters, you use”" or “[:alpha:]” as a regular expression.</li>
<li>If you have finite list of alternatives, you can use the regular expression for one of those, like “[abc]”. So a word is just matched, if it either contains a, b or c.</li>
<li>Another powerful regex might be “a[n]”, which indicates, that you just want to have those strings, which contain a n times. “a[2]” would match the string “banana”, because it contains two “n” s.</li>
<li>You can group regular expressions with (). If you have the regex “(a|b)c”, you have three groups. First “(a|b)”, then “c” and the whole term as a group. Even if you have just set one pair of parenthesis. The intention of grouping a regex within a regex is to gain the possibility of calling each group by an assigned number. Moreover, some of the functions in stringr make use of the group structure, e.g. by providing a match for every group.</li>
</ul>
<p>Regex provide almost limitless possibilities for Data Scientists and are - when handled professionally - a powerful language for describing pattern in strings. Since giving credit to every regex would require the space of an own chapter in this book, we’d like to redirect you to the stringr cheat sheet of stringr. Please visit <a href="http://edrub.in/CheatSheets/cheatSheetStringr.pdf" class="uri">http://edrub.in/CheatSheets/cheatSheetStringr.pdf</a> for more information about regex.</p>
<p>Keep in mind that it might be difficult to find regular expressions, which define the members of the set you want to match. Take a look at the string “love”. If you want to match every conjugation or word related to “love”, like “loved”, “lover” etc, you’ll need a regular expression to define this set. If you use the regular expression love\\w" , most matches will be given back correctly. For example, when matching “loved”, “loved” is given back. However, if matching “lovely” just “lovel” is given back, because you only have accounted for one additional character.</p>
<p>Always look out for caveats like this in regular expressions.</p>
</div>
<div id="functions-of-stringr-explained" class="section level2">
<h2><span class="header-section-number">7.4</span> Functions of stringR explained</h2>
<div id="manage-lengths" class="section level3">
<h3><span class="header-section-number">7.4.1</span> Manage lengths</h3>
<div id="str_length" class="section level4">
<h4><span class="header-section-number">7.4.1.1</span> str_length</h4>
<p>str_length(string) shows the number of characters (!not words) in the given argument string. This includes both white spaces and punctuation marks.</p>
<p>This could be used to compare the length of two strings, especially if they have to have the same length. This could also be used to determine the frequency of characters in a string.</p>
<p><u>Example</u></p>
<p>To show that punctuation marks and white spaces are also counted, we use here a simple example.</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" title="1"><span class="kw">str_length</span>(<span class="st">&quot;Hello, world!&quot;</span>)</a></code></pre></div>
<pre><code>## [1] 13</code></pre>
<p>In the above string there are 13 characters and 10 word characters. If you just want to get just the amount of word characters, you could subset the string by matching every character, which is a word character.</p>
</div>
<div id="str_pad" class="section level4">
<h4><span class="header-section-number">7.4.1.2</span> str_pad</h4>
<p>str_pad(string, width, side = c(“left”, “right”,“both”), pad = " ") adds characters either to the left or right of a string (as a default white spaces). The argument width states how long the string should be after the adding of the additional characters. Both as a parameter for the side means that the added characters are split between the left and the right side of the string. With the pad argument any other character can be added.</p>
<p>The idea is to adjust strings of different length to the same length in order to match them in a subsequent step. E.g. when the comparison of the numbers 000247 with 247 should result in a match, we add 0s in front of the second number.</p>
<p><u>Example</u></p>
<p>In our dataset, the id consists sometimes of 5 or 6 digits, as you can see here:</p>
<pre><code>##  [1] 144176 288190 174243 186363 231008 225599  70689 218370  90181 308152</code></pre>
<p>We want to adjust all of the numbers to the same length. So, we add a zero in front to those 5-digit numbers.</p>
<pre><code>##  [1] &quot;144176&quot; &quot;288190&quot; &quot;174243&quot; &quot;186363&quot; &quot;231008&quot; &quot;225599&quot; &quot;070689&quot; &quot;218370&quot;
##  [9] &quot;090181&quot; &quot;308152&quot;</code></pre>
<p>As we can see, some ids have now a 0 in front. These were 5-digit numbers before.</p>
<p>This works also, if id is of numeric type in r, but the type is then changed to character. As you can see here, the numbers above don’t have quotation marks, while the ones below have some.</p>
</div>
<div id="str_trunc" class="section level4">
<h4><span class="header-section-number">7.4.1.3</span> str_trunc</h4>
<p>str_trunc(string, width, side = c(“right”, “left”,
“center”), ellipsis = “…”) shortens the string to the given argument width. The side, on which the string is cut off is determined by the side argument.</p>
<p><u>Example</u></p>
<p>We could use the function to show more text from the description column than can be seen in the view(recipes) tab, to get a better impression, of what these texts are about. But we might not need the full text. We just want the first 50 characters, so we cut off to the right.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb357-1" title="1"><span class="kw">head</span>(<span class="kw">str_trunc</span>(recipes<span class="op">$</span>description, <span class="dt">width =</span> <span class="dv">50</span>, <span class="dt">side =</span> <span class="st">&quot;right&quot;</span>),<span class="dv">5</span>)</a></code></pre></div>
<pre><code>## [1] &quot;from oregonlive.com.  i loved the beef lettuce ...&quot;
## [2] &quot;this is just a recipe i came up with when i was...&quot;
## [3] &quot;i just love this recipe. it&#39;s quick, easy to ma...&quot;
## [4] &quot;this is another of our family favorites that ma...&quot;
## [5] &quot;finally comfort food for us vegetarians!!  post...&quot;</code></pre>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb359-1" title="1">recipes <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">description_short =</span> <span class="kw">str_trunc</span>(description, <span class="dt">width =</span> <span class="dv">50</span>, <span class="dt">side =</span> <span class="st">&quot;right&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(name, description_short) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   name                                  description_short                       
##   &lt;chr&gt;                                 &lt;chr&gt;                                   
## 1 chinese spicy beef lettuce wraps      from oregonlive.com.  i loved the beef ~
## 2 peanut butter and dark fudge brownie~ this is just a recipe i came up with wh~
## 3 dorito casserole                      i just love this recipe. it&#39;s quick, ea~
## 4 pink lady squares                     this is another of our family favorites~
## 5 vegetable pot pie   pies              finally comfort food for us vegetarians~
## 6 artichoke gratinata                   this is a giada delaurentis recipe that~</code></pre>
</div>
<div id="str_trim" class="section level4">
<h4><span class="header-section-number">7.4.1.4</span> str_trim</h4>
<p>str_trim(string, side = c(“both”, “left”, “right”)) trims whitespaces from the start or end or both.</p>
<p><u>Example</u></p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" title="1"><span class="kw">str_trim</span>(<span class="st">&quot;     Hello, world!        &quot;</span>, <span class="dt">side =</span> <span class="st">&quot;left&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Hello, world!        &quot;</code></pre>
<p>As you can see, the whitespaces on the left are cut out, while the whitespaces on the right are still there.</p>
<p>For deleting all the white spaces in a larger string, you could also use a regular expression and match all not white spaces by using “\S”.</p>
</div>
</div>
<div id="subset-strings" class="section level3">
<h3><span class="header-section-number">7.4.2</span> Subset Strings</h3>
<div id="str_sub" class="section level4">
<h4><span class="header-section-number">7.4.2.1</span> str_sub</h4>
<p>str_sub(string, start=1L, end = -1L) can be used to extract substrings of a string. The first argument requires text and as 2nd and 3rd parameter the start and end index of the substring must be given. This can also be used to delete characters at the beginning and end of a string by extracting a version of the string without the beginning and end characters.</p>
<p><u>Example</u></p>
<p>In our data we have the nutrition given as a character string in the following format</p>
<pre><code>## [1] &quot;[267.4, 18.0, 15.0, 28.0, 42.0, 20.0, 5.0]&quot;</code></pre>
<p>This whole term is a string, which we want to split into a list. First, we have to delete the “[" in the beginning of the string and "]” at the end.</p>
<p>Here it is useful, that We can use the str_sub also to eliminate unwanted signs at the beginning and the end of a string.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb364-1" title="1"><span class="kw">str_sub</span>(recipes<span class="op">$</span>nutrition[<span class="dv">1</span>], <span class="dv">2</span>,<span class="kw">str_length</span>(recipes<span class="op">$</span>nutrition[<span class="dv">1</span>])<span class="op">-</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] &quot;267.4, 18.0, 15.0, 28.0, 42.0, 20.0, 5.0&quot;</code></pre>
<p>Then we can use the strsplit() function from base R to split the string into a list of strings by using “,” as the seperator. We don’t have to care for the brackets additionally then.</p>
</div>
<div id="str_subset" class="section level4">
<h4><span class="header-section-number">7.4.2.2</span> str_subset</h4>
<p>str_subset(string, pattern) gives back strings that contain a pattern match. The function looks for all strings with the argument pattern in it and returns all the fitting strings as a (possibly) smaller set of strings.</p>
<p><u>Example</u></p>
<p>To give an example, we look at the description of a recipe, which looks like the following:</p>
<pre><code>## [1] &quot;from oregonlive.com.  i loved the beef lettuce wraps from a restaurant in montauk, ny called east by northeast. this was the closest i have found to recreating it with a few minor adjustments from me.&quot;</code></pre>
<p>Some of the descriptions contain the source of the recipe. So in this case, we want all the recipes, which originate from oregonlive.com</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" title="1"><span class="kw">str_subset</span>(recipes<span class="op">$</span>description, <span class="st">&quot;oregonlive.com&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;from oregonlive.com.  i loved the beef lettuce wraps from a restaurant in montauk, ny called east by northeast. this was the closest i have found to recreating it with a few minor adjustments from me.&quot;                                                                                                                                                                                                                                                                                                                       
## [2] &quot;this is a recipe in transition. it was made after a conversation with a friend. there is no place that i have been able to find a recipe for bacon lo mein - this was the closest i came on the internet. originally, i found this on oregonlive.com, tuesday, nov. 29, 2005 from philip jones, fort atkinson, wis. however, have tweaked it and now it&#39;s mine bad or good! here&#39;s to ya&#39;.update: 01/22/2010 - to the reviewer who gave it a thumbs up - did you mean to omit the stars? after all - i got a glowing report! ;)&quot;</code></pre>
<p>As you can see, the set of strings has been reduced just to two strings. These are those, which contain “oregon.live”</p>
</div>
<div id="str_extract" class="section level4">
<h4><span class="header-section-number">7.4.2.3</span> str_extract</h4>
<p>str_extract(string, pattern) returns the first pattern match found in each string as a vector.</p>
<p>If you simply give in a word as an argument for pattern, then the first match is either the word itself or the function gives NA out, if there is no match. If you give in a set of strings, the result is a vector with just the two entries mentioned before. Since this just gives the information, if a string contains a word or not, the str_detect function would be more suitable for the task.</p>
<p>The function can also be used with a vector of strings as an argument for pattern. Then the function gives back the first string of the vector, which has been found in the string of the first argument, which shall be searched. str_detect would just indicate that one of the strings in the vector is true, but not which of them.</p>
<p>If you don’t simply want the first match, then you can use also str.extract.all(). The output is a list of vectors.</p>
<p><u>Example 1</u></p>
<p>We look at the common words love and recipe in the description. The result shows, in which decriptions which word of these comes first or gives back NA if the pattern isn’t found at all in the string.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" title="1"><span class="kw">head</span>(<span class="kw">str_extract</span>(recipes<span class="op">$</span>description, <span class="st">&quot;(love</span><span class="ch">\\</span><span class="st">w|recipe</span><span class="ch">\\</span><span class="st">w)&quot;</span>),<span class="dv">60</span>)</a></code></pre></div>
<pre><code>##  [1] &quot;loved&quot;   NA        NA        NA        NA        NA        NA       
##  [8] NA        NA        NA        NA        &quot;recipes&quot; NA        NA       
## [15] NA        NA        NA        NA        NA        NA        &quot;recipes&quot;
## [22] NA        NA        NA        NA        NA        &quot;recipes&quot; NA       
## [29] NA        NA        NA        NA        NA        &quot;loves&quot;   NA       
## [36] NA        &quot;recipel&quot; NA        NA        NA        NA        NA       
## [43] NA        NA        NA        &quot;recipes&quot; NA        NA        NA       
## [50] NA        NA        NA        NA        &quot;recipes&quot; &quot;lovel&quot;   NA       
## [57] NA        NA        NA        NA</code></pre>
<p>This example also shows, that you have to be careful with regular expressions. The 55rd entry “lovel” comes from “lovely”. Maybe you would rather have “lovely” returned.</p>
<p><u>Example 2</u></p>
<p>One could also look at the ingredients and check, which recipes contain milk and eggs. Since we want to show that both are present in the dish or just one of these ingredients, we use str_extract_all</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb371-1" title="1"><span class="kw">head</span>(<span class="kw">str_extract_all</span>(recipes<span class="op">$</span>ingredients, <span class="st">&quot;milk|eggs&quot;</span>),<span class="dv">5</span>)</a></code></pre></div>
<pre><code>## [[1]]
## character(0)
## 
## [[2]]
## [1] &quot;eggs&quot; &quot;milk&quot;
## 
## [[3]]
## character(0)
## 
## [[4]]
## [1] &quot;milk&quot;
## 
## [[5]]
## [1] &quot;milk&quot;</code></pre>
<p>As you can see the second recipe contains both eggs and milk, the 4th and 5th recipe contain just milk, but no eggs.</p>
</div>
<div id="str_match" class="section level4">
<h4><span class="header-section-number">7.4.2.4</span> str_match</h4>
<p>str_match(string, pattern) returns the first pattern match found in each string, as a matrix with a column for each () group in pattern.</p>
<p>This is based on groups from regular expressions. Strings can be grouped via brackets (). Everything within this bracket belongs to the same group. E.g. in the regex (a|b)(c|d) the regular expression a|b is one group. because they’re in the same bracket.</p>
<p>In this function if a match of a is detected, this is a match for group 1 and thus “a” is put into column 2. The first column is always reserved for the whole expression. E.g. if the string “ac” is found, there will be an entry “ac” in the first column, “a” in the second column, because this is the letter matched for the first group. In the third column “c” will be matched, because “c” belongs to the second group.</p>
<p>As with str_extract, here also exists a str_match_all function to get all the matches and not just the first.</p>
<p><u>Example</u></p>
<p>Here we want to match the regular expression (love\w|recipe\w).+(beef). This means “love” and “recipe” form one group and beef forms the other. The whole expression as such is also a group.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" title="1"><span class="kw">head</span>(<span class="kw">str_match</span>(recipes<span class="op">$</span>description, <span class="st">&quot;(love</span><span class="ch">\\</span><span class="st">w|recipe</span><span class="ch">\\</span><span class="st">w).+(beef)&quot;</span>),<span class="dv">5</span>)</a></code></pre></div>
<pre><code>##      [,1]             [,2]    [,3]  
## [1,] &quot;loved the beef&quot; &quot;loved&quot; &quot;beef&quot;
## [2,] NA               NA      NA    
## [3,] NA               NA      NA    
## [4,] NA               NA      NA    
## [5,] NA               NA      NA</code></pre>
<p>As you can see, in the first column there is the entry beloging to the whole regular expression as a group. The string contains “love” as well as “beef”. In the second column, the string matched from the first group is “love”, in the third column the string matched from the second group is “beef”.</p>
</div>
</div>
<div id="detect-matches" class="section level3">
<h3><span class="header-section-number">7.4.3</span> Detect matches</h3>
<div id="str_detect" class="section level4">
<h4><span class="header-section-number">7.4.3.1</span> str_detect</h4>
<p>str_detect(string, pattern) detects the presence of a pattern match in a string. The result is simply TRUE and FALSE</p>
<p><u>Example</u></p>
<p>Here we search for love and recipe in the description of every recipe.</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" title="1"><span class="kw">head</span>(<span class="kw">str_detect</span>(recipes<span class="op">$</span>description, <span class="st">&quot;(love</span><span class="ch">\\</span><span class="st">w|recipe</span><span class="ch">\\</span><span class="st">w)&quot;</span>),<span class="dv">100</span>)</a></code></pre></div>
<pre><code>##   [1]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
##  [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
##  [25] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
##  [37]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE    NA  TRUE FALSE FALSE
##  [49] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE    NA  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
##  [97] FALSE FALSE FALSE  TRUE</code></pre>
<p>In contrast to extract, we just see, that one of the strings is in a certain string or not, but not which one of those.</p>
</div>
<div id="str_which" class="section level4">
<h4><span class="header-section-number">7.4.3.2</span> str_which</h4>
<p>str_which(string, pattern) finds the indices of strings that contain a pattern match. The output is a vector with these indices.</p>
<p><u>Example</u></p>
<p>Again we search for “love” and “recipe” in the description column.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb377-1" title="1"><span class="kw">head</span>(<span class="kw">str_which</span>(recipes<span class="op">$</span>description, <span class="st">&quot;(love</span><span class="ch">\\</span><span class="st">w|recipe</span><span class="ch">\\</span><span class="st">w)&quot;</span>),<span class="dv">100</span>)</a></code></pre></div>
<pre><code>##   [1]   1  12  21  27  34  37  46  54  55  77  89  96 100 115 125 126 127 146
##  [19] 152 154 166 169 174 180 191 192 193 200 224 227 234 239 246 276 282 286
##  [37] 302 309 311 325 333 337 345 346 352 354 367 389 392 402 405 410 417 427
##  [55] 431 435 440 442 457 463 465 473 483 487 497 509 516 518 522 523 538 550
##  [73] 555 560 564 573 575 596 604 611 612 620 639 649 666 670 677 695 712 724
##  [91] 725 732 734 746 768 770 779 780 788 798</code></pre>
<p>In these rows there are descriptions, which contain either the word love or recipe.</p>
</div>
<div id="str_count" class="section level4">
<h4><span class="header-section-number">7.4.3.3</span> str_count</h4>
<p>str_count(string, pattern) counts the number of matches in a string.</p>
<p><u>Example</u></p>
<p>“i” occurs very often in the descriptions of the recipes. Let’s see how often per description. As a regular expression we have chosen " i “, that is an i surrounded by white spaces. This means in sentences like”I …." the i is not matched.</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb379-1" title="1"><span class="kw">head</span>(<span class="kw">str_count</span>(recipes<span class="op">$</span>description, <span class="st">&quot; i &quot;</span>),<span class="dv">100</span>)</a></code></pre></div>
<pre><code>##   [1]  2  2  0  1  0  1  0  0  2  0  1  0  0  1  0  1  0  0  1  1  0  0  0  1  2
##  [26]  2  1  8  0  0  0  6  0  0  0  0  3  0  0  0  0  0  0  0 NA  0  0  0  0  2
##  [51]  2  0  1  4  0  2  2  0  1  0  1  0  1  0  0  1  0  1  0  2  0  0  0  0  2
##  [76]  0  2  0  1  1  2  0  0  0  1  0  0 NA  2  0  0  0  0  0  0  1  2  0  0  0</code></pre>
</div>
<div id="str_locate" class="section level4">
<h4><span class="header-section-number">7.4.3.4</span> str_locate</h4>
<p>str_locate(string, pattern) locates the positions of the first pattern match within a string.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb381-1" title="1"><span class="kw">head</span>(<span class="kw">str_locate</span>(recipes<span class="op">$</span>description, <span class="st">&quot; i &quot;</span>),<span class="dv">10</span>)</a></code></pre></div>
<pre><code>##       start end
##  [1,]    22  24
##  [2,]    22  24
##  [3,]    NA  NA
##  [4,]   175 177
##  [5,]    NA  NA
##  [6,]    40  42
##  [7,]    NA  NA
##  [8,]    NA  NA
##  [9,]   112 114
## [10,]    NA  NA</code></pre>
<p>If you look up the first description string</p>
<pre><code>## [1] &quot;from oregonlive.com.  i loved the beef lettuce wraps from a restaurant in montauk, ny called east by northeast. this was the closest i have found to recreating it with a few minor adjustments from me.&quot;</code></pre>
<p>Then you can see, that the first " i " is indeed from position 22 to 24. The length of 3 (24-22+1) come from 2 whitespaces and the i.</p>
</div>
</div>
<div id="mutate-strings" class="section level3">
<h3><span class="header-section-number">7.4.4</span> Mutate Strings</h3>
<p>In this part we will use Italy, a subset of “recipes” that is exclusively containing recipes mentioning “pizza”.</p>
<div id="str_replace-and-replace_all" class="section level4">
<h4><span class="header-section-number">7.4.4.1</span> str_replace (and replace_all)</h4>
<p>The replace functions of stringr are used to match patterns and replace them with new strings.</p>
<p><u>Example</u></p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb384-1" title="1">Italy &lt;-<span class="st"> </span>Italy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb384-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">name1 =</span> <span class="kw">str_replace</span>(Italy<span class="op">$</span>name, <span class="st">&quot;pizza&quot;</span>, <span class="st">&quot;fluffy pizza&quot;</span>))</a></code></pre></div>
<p>For seo (search engine optimization) we will add the popular word “fluffy” to all our pizza recipes in the name column.<br />
In order to replace several matches, use str_replace_all and create a vector containing multiple conditions.</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" title="1">Italy &lt;-<span class="st"> </span>Italy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb385-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">name2 =</span> <span class="kw">str_replace_all</span>(Italy<span class="op">$</span>name, <span class="kw">c</span>(<span class="st">&quot;pizza&quot;</span> =<span class="st"> &quot;fluffy pizza&quot;</span>, <span class="st">&quot;easy&quot;</span> =<span class="st"> &quot;easy peasy&quot;</span>)))</a></code></pre></div>
<div id="str_to_lower" class="section level5">
<h5><span class="header-section-number">7.4.4.1.1</span> str_to_lower</h5>
<p>We can use str_to_ to change the case of text strings. They are intuitive:
str_to_lower will change text to lower case,
str_to_upper will change text to upper case,
str_to_title will change first letter of a string into a capital letter.</p>
<p>…</p>
<p><u>Example</u></p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb386-1" title="1">p &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;i&quot;</span>,<span class="st">&quot;like&quot;</span>,<span class="st">&quot;pizza&quot;</span>,<span class="st">&quot;and&quot;</span>,<span class="st">&quot;i don&#39;t share pizzza&quot;</span>)</a>
<a class="sourceLine" id="cb386-2" title="2"><span class="kw">str_to_upper</span>(p)</a></code></pre></div>
<pre><code>## [1] &quot;I&quot;                    &quot;LIKE&quot;                 &quot;PIZZA&quot;               
## [4] &quot;AND&quot;                  &quot;I DON&#39;T SHARE PIZZZA&quot;</code></pre>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb388-1" title="1"><span class="kw">str_to_sentence</span>(p)</a></code></pre></div>
<pre><code>## [1] &quot;I&quot;                    &quot;Like&quot;                 &quot;Pizza&quot;               
## [4] &quot;And&quot;                  &quot;I don&#39;t share pizzza&quot;</code></pre>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb390-1" title="1">p &lt;-<span class="st"> </span><span class="kw">str_c</span>(p, <span class="dt">collapse =</span> <span class="st">&quot; &quot;</span>) <span class="co">#make it one sentence (see str_c)</span></a>
<a class="sourceLine" id="cb390-2" title="2"><span class="kw">str_to_sentence</span>(p)</a></code></pre></div>
<pre><code>## [1] &quot;I like pizza and i don&#39;t share pizzza&quot;</code></pre>
<p>Attention: Locales will apply language conventions when changing the case. As you know, capitalization is used different in German and English. Above, the default would be locale = “en” but you can change it into every other language. The code for your language can be found in Wikipedia - List of ISO 639-1 codes.</p>
<p>Locales also come in handy for the str_order or str_sort fuction.
str_sort will sort a list of string vectors by alphabet (locale will determine wich alphabet is applied)</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb392-1" title="1"><span class="kw">str_sort</span>(Italy<span class="op">$</span>name1[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>], <span class="dt">decreasing =</span> <span class="ot">FALSE</span>, <span class="dt">na_last =</span> <span class="ot">TRUE</span>, <span class="dt">locale =</span> <span class="st">&quot;en&quot;</span>, <span class="dt">numeric =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>##  [1] &quot;fluffy pizza tomato sauce&quot;                            
##  [2] &quot;karen s slow cooker fluffy pizza chicken&quot;             
##  [3] &quot;macaroni fluffy pizza casserole&quot;                      
##  [4] &quot;mini fluffy pizza muffins&quot;                            
##  [5] &quot;parmesan spinach fluffy pizza&quot;                        
##  [6] &quot;pizzeria style sausage fluffy pizza&quot;                  
##  [7] &quot;quick bread fluffy pizza&quot;                             
##  [8] &quot;strawberry fluffy pizza&quot;                              
##  [9] &quot;three cheese fluffy pizza with truffle oil&quot;           
## [10] &quot;yeast free fluffy pizza with fresh basil and tomatoes&quot;</code></pre>
</div>
</div>
</div>
<div id="join-and-split" class="section level3">
<h3><span class="header-section-number">7.4.5</span> Join and Split</h3>
<div id="str_c" class="section level4">
<h4><span class="header-section-number">7.4.5.1</span> str_c</h4>
<p>If you want to merge several strings into one, the str_c function is what you need. It is simple: either you join two or more single strings using the separate argument to choose a separation sign or you join a vector of strings by having the argument collapse control how the strings are separated.</p>
<p><u>Example</u>
In our Pizza example you can first see the join of the first few names into one string separated by “,” and then a vector that is joint into one string using the words “and then” as a form of separation.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb394-1" title="1"><span class="kw">str_c</span>(Italy<span class="op">$</span>name2[<span class="dv">1</span>],Italy<span class="op">$</span>name2[<span class="dv">2</span>], Italy<span class="op">$</span>name2[<span class="dv">3</span>], <span class="dt">sep =</span> <span class="st">&quot;, &quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;three cheese fluffy pizza with truffle oil, karen s slow cooker fluffy pizza chicken, yeast free fluffy pizza with fresh basil and tomatoes&quot;</code></pre>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb396-1" title="1"><span class="kw">str_c</span>(Italy<span class="op">$</span>name2[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], <span class="dt">collapse =</span> <span class="st">&quot; and then &quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;three cheese fluffy pizza with truffle oil and then karen s slow cooker fluffy pizza chicken and then yeast free fluffy pizza with fresh basil and tomatoes&quot;</code></pre>
</div>
<div id="str_split" class="section level4">
<h4><span class="header-section-number">7.4.5.2</span> str_split</h4>
<p>The str_split function will split a vector of strings into a list of substrings. The split is made where there is a match with a pattern of your choice.</p>
<p><u>Example</u>
In our example we will split the column step containing step by step instructions into single substrings. As the steps currently have the format of a list, we can use the comma as a pattern to separate the strings.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb398-1" title="1">Italy<span class="op">$</span>steps <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_split</span>(<span class="st">&quot;&#39;, &#39;&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;[&#39;follow heating directions for crust&quot;                  
## [2] &quot;sprinkle mozzarella and parmesan cheese evenly on crust&quot;
## [3] &quot;dollop the ricotta cheese to your liking on top&quot;        
## [4] &quot;bake pizza until cheese get bubbly&quot;                     
## [5] &quot;drizzle truffle oil over cooked pizza&quot;                  
## [6] &quot;enjoy&#39;]&quot;                                                
## 
## [[2]]
## [1] &quot;[&#39;place chicken , onion , bell pepper and celery in a slow cooker&quot;                                                                     
## [2] &quot;in a medium bowl combine the tomato soup , cream of mushroom soup , tomato paste , water , parsley , oregano , basil , salt and pepper&quot;
## [3] &quot;mix well and pour mixture over chicken and vegetables in slow cooker&quot;                                                                  
## [4] &quot;stir to coat and add bay leaf&quot;                                                                                                         
## [5] &quot;cook on low setting for 8 hours , until chicken and vegetables are tender&#39;]&quot;</code></pre>
<p>If you’d rather have the subset of strings in a matrix, you can use str_split_fixed and choose n for the number of columns in the matrix.</p>
</div>
<div id="str_glue" class="section level4">
<h4><span class="header-section-number">7.4.5.3</span> str_glue</h4>
<p><u>Example</u></p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb400-1" title="1">pandas &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Carl&quot;</span>,<span class="st">&quot;Jakob&quot;</span>,<span class="st">&quot;Jakob&quot;</span>,<span class="st">&quot;Markus&quot;</span>,<span class="st">&quot;Robert&quot;</span>)</a>
<a class="sourceLine" id="cb400-2" title="2"><span class="kw">str_glue</span>(<span class="st">&quot;Hey {pandas}! I&#39;d recommend the recipe &#39;{str_to_title(Italy$name2[1:5])}&#39; for you.&quot;</span> )</a></code></pre></div>
<pre><code>## Hey Carl! I&#39;d recommend the recipe &#39;Three Cheese Fluffy Pizza With Truffle Oil&#39; for you.
## Hey Jakob! I&#39;d recommend the recipe &#39;Karen S Slow Cooker Fluffy Pizza Chicken&#39; for you.
## Hey Jakob! I&#39;d recommend the recipe &#39;Yeast Free Fluffy Pizza With Fresh Basil And Tomatoes&#39; for you.
## Hey Markus! I&#39;d recommend the recipe &#39;Parmesan Spinach Fluffy Pizza&#39; for you.
## Hey Robert! I&#39;d recommend the recipe &#39;Macaroni Fluffy Pizza Casserole&#39; for you.</code></pre>
<p>As you can see, str_glue literally glues strings together to create a new string. Expressions must be written in {}, everything else is up to you tough: you can use data frames, lists and regex. Useful for customized mailing, distribution of tasks ect.</p>
</div>
</div>
</div>
<div id="literature" class="section level2">
<h2><span class="header-section-number">7.5</span> Literature</h2>
<p>Silge, J., &amp; Robinson, D. (2017). Text mining with R: A tidy approach. " O’Reilly Media, Inc.".</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="forcats.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-table.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/tillschwoerer/R-data-science-book/blob/master/stringr.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
